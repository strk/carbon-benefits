<!-- report backbone template -->
<div class="report_stats">

x3C% if(stats.carbon) { %>
<div class="block">
    <span class="title">
        <h2>CARBON</h2>
        <p>x3C% print(number_format(stats.carbon.qty)); %><small>T</small></p>
    </span>
    x3C% if(stats.carbon) { %>
    <ul class="normal list">
      x3C% if(stats.carbon.countries.length === 0) { %>
        <ul><li class="last"></li></ul>
      x3C% } else { %>
          x3C% _.each(stats.carbon.countries, function(ct, idx) { %>
          x3C% if( idx == (stats.carbon.countries.length - 1)) { %>
          <li class="last">
          x3C% } else { %>
          <li>
          x3C% } %>
                <h5>x3C%= ct.name %></h5>
                <p class="info">x3C% print(number_format(ct.qty)); %> T</p>
          </li>
          x3C% }); %>
      x3C% } %>
    </ul>
    x3C% } %>
</div>
x3C% } %>

x3C% if(stats.carbon_sequestration) { %>
<div class="block">
    <span class="title">
        x3C% if (stats.carbon_sequestration.qty.toFixed(0).length > 7) { %>
            <h2>C. SEQ.</h2>
        x3C% } else { %>
            <h2>C. SEQUESTRATION</h2>
        x3C% } %>
        <p>x3C% print(number_format(stats.carbon_sequestration.qty)); %><small>T</small></p>
    </span>
    <ul class="normal list">
        <li></li>
    </ul>
</div>
x3C% } %>


x3C% if(stats.covered_by_PA && stats.carbon_sequestration) { %>
<div class="block">
    <span class="title">
        <h2>COVERED BY PAs</h2>
        <p>x3C% print(Math.min('100', (1e8*stats.covered_by_PA.km2/stats.carbon_sequestration.area).toFixed(0))); %><small>%</small></p>
    </span>
    <ul class="normal list">
      <li>
        Overlapping with x3C%= stats.covered_by_PA.num_overlap %> Protected Area(s)
      </li>
    </ul>
</div>
x3C% } %>

x3C% if(stats.covered_by_KBA) { %>
<div class="block">
    <span class="title">
        <h2>COVERED BY KBAs</h2>
        <p>x3C%= stats.covered_by_KBA.percent.toFixed(0) %><small>%</small></p>
    </span>
    <ul class="normal list">
      <li>
        Overlapping with x3C%= stats.covered_by_KBA.num_overlap %> Key Biodiversity Area(s)
      </li>
  </ul> 
</div>
x3C% } %>

x3C% if(stats.restoration_potential) { %>
<div class="block">
    <span class="title">
        <h2>FOREST RESTORATION POTENTIAL</h2>
        <p>&nbsp;</p>
    </span>
    <ul class="inline list">
        <li>
            <h5>WIDE-SCALE</h5>
            <p class="info">x3C%=stats.restoration_potential.wide_scale.toFixed(0)%>%</p>
        </li>
        <li>
            <h5>MOSAIC</h5>
            <p class="info">x3C%=stats.restoration_potential.mosaic.toFixed(0) %>%</p>
        </li>
        <li>
            <h5>REMOTE</h5>
            <p class="info">x3C%=stats.restoration_potential.remote.toFixed(0) %>%</p>
        </li>
        <li class="last">
            <h5>NONE</h5>
            <p class="info">x3C%=stats.restoration_potential.none.toFixed(0) %>%</p>
        </li>
    </ul>
</div>
x3C% } %>

x3C% if(stats.conservation_priorities && stats.conservation_priorities.length > 0) { %>
<div class="block">
    <span class="title">
        <h2>CONSERVATION PRIORITIES</h2>
        <p>&nbsp;</p>
    </span>
    x3C% _.each(stats.conservation_priorities, function(area) { %>
    <span class="conservation_header"><p>x3C%= area.name %></p></span>
    <ul class="inline list">
        <li>
            <h5>VERY-HIGH</h5>
            <p class="info">x3C%= area.percents[0].toFixed(0) %>%</p>
        </li>
        <li>
            <h5>HIGH</h5>
            <p class="info">x3C%= area.percents[1].toFixed(0)  %>%</p>
        </li>
        <li>
            <h5>MEDIUM</h5>
            <p class="info">x3C%= area.percents[2].toFixed(0)  %>%</p>
        </li>
        <li class="last">
            <h5>OUT</h5>
            <p class="info">x3C%= area.percents[4].toFixed(0)  %>%</p>
        </li>
    </ul>
    x3C% }); %>
</div>
x3C% } %>

x3C% if(stats.forest_status) { %>
<div class="block">
    <span class="title">
        <h2>FOREST STATUS</h2>
        <p>&nbsp;</p>
    </span>
    <ul class="normal list">
      <li><h5>% Defined as intact forest</h5><p class="info ">x3C%= stats.forest_status.intact.toFixed(0) %>%</p></li>
      <li><h5>% Defined as fragmented/managed forest</h5><p class="info ">x3C%= stats.forest_status.fragmented.toFixed(0) %>%</p></li>
      <li><h5>% Defined as partially deforested areas</h5><p class="info ">x3C%= stats.forest_status.partial.toFixed(0) %>%</p></li>
      <li><h5>% Defined as deforested areas</h5><p class="info ">x3C%= stats.forest_status.deforested.toFixed(0) %>%</p></li>
    </ul>
</div>
x3C% } %>


x3C% if(stats.carbon_sum) { %>
<div class="block">
    <span class="title">
        <h2 class="nohelp">CARBON</h2>
        <p>x3C% print(number_format(stats.carbon_sum.qty)); %><small>T</small></p>
    </span>
    <ul class="normal list tooltip">
      x3C% _.each(stats.carbon_sum.polygons, function(p, idx) { %>
        x3C% if( idx == (stats.carbon_sum.polygons.length - 1)) { %>
        <li class="last">
        x3C% } else { %>
        <li>
        x3C% } %>
        <!-- tooltip -->

        <div class="list_tooltip_data">
          <h4>x3C%= p.polygon %></h4>
          <span class="blue">
              <h6>x3C%= number_format(p.carbon) %> T</h6>
            <p>Carbon</p>
          </span>
          <span class="white">
            <h6>x3C%= number_format(p.carbon_sequestration) %>T</h6>
            <p>RestP: Max. Extra Carbon</p>
          </span>
        </div>

        <h5 class="stats">x3C%= p.polygon %></h5>
            <div class="stats_bar">
                <span class="r_bar" style="width: x3C%= p.percent %>%"></span>
                <div class="stats_bar inner" style="width: x3C%= p.percent_seq %>%">
                    <span class="r_bar"></span>
                </div>
            </div>
            <p>x3C%= p.percent.toFixed(0) %>%</p>
        </li>
      x3C% }); %>
    </ul>
</div>
x3C% } %>

x3C% if(stats.coverage) { %>
<div class="block">
    <span class="title">
        <h2 class="nohelp">COVERAGE STATICTICS</h2>
        <p>&nbsp;</p>
    </span>
    <ul class="normal list">
      x3C% _.each(stats.coverage, function(v, k) { %>
        <li>
          <h5 class="stats">x3C%= k %></h5>
            <div class="stats_bar">
                <span class="r_bar" style="width: x3C%=v %>%"></span>
            </div>
            <p>x3C%= v.toFixed(0) %>%</p>
        </li>
      x3C% }); %>
    </ul>
</div>
x3C% } %>


x3C% if(stats.conservation_priority_areas && stats.conservation_priority_areas.length > 0) { %>
<div class="block">
    <span class="title">
        <h2>CONSERVATION PRIORITIES</h2>
        <p>&nbsp;</p>
    </span>
    <ul class="down list">
        x3C% _.each(stats.conservation_priority_areas, function(area) { %>
        <li>
            <h5>x3C%= area.name %></h5>
            <ul>
                <li class="hst">
                    <h6>Highest</h6>
                    <div class="stats_bar"><span class="r_bar" style="width: x3C%= area.percents[0] %>%"></span></div>
                </li>
                <li class="h">
                    <h6>High</h6>
                    <div class="stats_bar"><span class="r_bar" style="width: x3C%= area.percents[1] %>%"></span></div>
                </li>
                <li class="m">
                    <h6>Med</h6>
                    <div class="stats_bar"><span class="r_bar" style="width: x3C%= area.percents[2] %>%"></span></div>
                </li>
                <li class="l">
                    <h6>Low</h6>
                    <div class="stats_bar"><span class="r_bar" style="width: x3C%= area.percents[3] %>%"></span></div>
                </li>
                <li class="out">
                    <h6>Outs.</h6>
                    <div class="stats_bar"><span class="r_bar" style="width: x3C%= area.percents[4] %>%"></span></div>
                </li>
            </ul>
        </li>
      x3C% }); %>
    </ul>
</div>
x3C% } %>

<div style="padding-top: 60px; float:left;"></div>

</div> <!-- .report_stats -->
